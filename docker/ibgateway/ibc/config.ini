# ============================================
# IBC Configuration for IB Gateway
# ============================================
# IBC automates login and manages IB Gateway.
# See: https://github.com/IbcAlpha/IBC/blob/master/userguide.md
#
# Credentials are injected via environment variables
# IBKR_USER and IBKR_PASS (set in .env file).
# ============================================

# ---- Login credentials ----
# Use env vars - IBC reads IBKR_USER / IBKR_PASS from environment
# when these are left empty
IbLoginId=
IbPassword=

# ---- Trading mode ----
# Overridden by TRADING_MODE env var in run.sh
TradingMode=paper

# ---- Connection settings ----
# Accept API connections from other containers on Docker network
AcceptIncomingConnectionAction=accept

# Allow connections without read-only restriction
ReadOnlyApi=

# ---- Session handling ----
# If another session is already active with same credentials:
# "secondary" = connect as secondary (safe, read-only data)
# "primary" = take over (kicks other session)
ExistingSessionDetectedAction=secondary

# ---- Auto-accept dialogs ----
# IB Gateway shows various warning dialogs that block login
# IBC auto-accepts them to keep headless operation running
AcceptNonBrokerageAccountWarning=yes
AllowBlindTrading=yes
DismissPasswordExpiryWarning=yes
DismissNSEComplianceNotice=yes

# ---- Auto-restart ----
# Restart IB Gateway if it shuts down unexpectedly
# IBC will re-login automatically
AutoRestart=yes

# IB resets connections daily at ~23:45 ET
# IBC waits then reconnects at this time
AutoRestartTime=23:58

# ---- Logging ----
LogToConsole=yes
